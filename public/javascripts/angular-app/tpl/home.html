<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Yun Dashboard</title>
    <script src="https://use.fontawesome.com/9801496e3d.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<!-- <script type="text/javascript">
  var machineInfo = [
  { panId: "61a1", current: 100 },
  { panId: "62a2", current: 0 }
];

  var machinsInfo = {
    "61a1": {type: "M", xcoord:0, ycoord:0},
    "62a2": {type: "L", xcoord:10, ycoord:10}
  }

  var createMachineSumarryData = 
    function(machineType){
      var freeCount=0;
      var totalCount = $scope.messages.filter(function(data){
           if (machinesInfo[data.panId].type === machineType){
              if (data.current>0) {
                freeCount++;
              }
              return true;
           } else {
            return false;
           }
      }).length;
      var percentage = freeCount/totalCount*100.0;

      var final =[{
        free: freeCount,
        total: totalCount,
        percentage: percentage
      }];

      return final;
  }



var update = d3.select('.chart1').append('svg')
  .attr("width", "100%")
  .attr("height", "20")
  .selectAll('rect')
  .data($scope.messages)
  // .style('color', 'blue');

var enter = update.enter()
  .append('rect')
  .filter(function(d){

  })
  // .text(function (d) {
  //   return d.name;
  // })
  // .style('color', 'green');

update.exit().remove();

update.merge(enter)
  .attr('width', d => (d.free/d.total*100.0 + '%'))
  .attr('height', '20')
  .style('fill', '#199cfc')
  .attr('x', '0')
  .attr('y', '0')

  // .style('border', '1px solid black')

</script> -->

<body style="">
    <nav class="navbar" style="background: #2980b9; box-shadow: 0px 4.33px 0px 0px rgba(41, 128, 185, 0.5); padding: 0.5em 0">
  <div class="col-xs-5">
  <p style="font-size:1.3em">

<i class="fa fa-circle" style="color:green;/* border: white; */-webkit-text-stroke-width: 0.15em;-webkit-text-stroke-color: white;" aria-hidden="true"></i>
  <span style="color:white; padding-left:8px">Now Open</span><span style="padding-left:3em; color:white">Today open from 8:30am to 9:00pm</span></p>

    
  </div>
  <div class="col-xs-7 pull-right">
                  <img src="images/waterlooLogo.png" class="pull-right" style=" font-size: 8em; width:40%; padding-right: 50px" alt="">
  </div>
        <!-- <div class="container"> -->
<!--             <div class="navbar-header" style="margin-top:5px">
                Waterloo Student Machine Shop
            </div> -->


<!-- <div class="container"> -->
<div class="row">

            <!-- </div> -->

</div>
<div class="row">

</div>  
<div class="row">
  <div class="col-xs-12 col-md-8 col-md-offset-2 text-center" style="margin-bottom:20px; margin-top:40px">
   <!-- fa-circle-o -->

    <h1 class="lead" style="color:white; font-size:2.5em">Student Machine Shop Occupancy Monitoring System</h1>
    <p style="color:white"> E5 1101, University of Waterloo, Waterloo, ON N2L 3G1</p>

  </div>
</div>


    
</div>
    </nav>
    <div class="container" style="margin-top:100px">
        <h1 style="font-family: 'Roboto', sans-serif;
    font-weight: 100; color:white;">Availability</h1>
        <hr style="background-color: white; height: 1px; border: 0;">
        <div class="row">
            <div class="col-xs-2 col-md-1" style="font-family: 'Roboto', sans-serif;
    font-weight: 300; color:#199cfc; font-size:80px">{{$root.busy.M}}</div>
            <div class="col-md-10 col-xs-10">
                <div class="row">
                    <div class="col-xs-12">
                        <h2 style="font-family: 'Roboto', sans-serif;
    font-weight: 500; color:#199cfc; font-size:40px">Milling</h2>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        <p style="font-family: 'Roboto', sans-serif;
    font-weight: 500; color:#2980B9; ">
                            Free out of {{myConfig.PANID.M.length}} units in total
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12">
                <bar-chart class="chart1"></bar-chart>
            </div>
        </div>





        <div class="row">
            <div class="col-xs-2 col-md-1" style="font-family: 'Roboto', sans-serif;
    font-weight: 300; color:#199cfc; font-size:80px">{{$root.busy.L}}</div>
            <div class="col-md-10 col-xs-10">
                <div class="row">
                    <div class="col-xs-12">
                        <h2 style="font-family: 'Roboto', sans-serif;
    font-weight: 500; color:#199cfc; font-size:40px">Lathe</h2>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        <p style="font-family: 'Roboto', sans-serif;
    font-weight: 500; color:#2980B9; ">
                            Free out of {{myConfig.PANID.L.length}} units in total
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12">
                <bar-chart class="chart1"></bar-chart>
            </div>
        </div>




    </div>
    <div class="new-section" style="background:#ddd; padding-top:50px; padding-bottom:50px">
        <div class="container">
            <h1 style="font-family: 'Roboto', sans-serif;
    font-weight: 100;">Occupancy Map</h1>
            <hr style="background-color: black; height: 1px; border: 0;">
            <div class="row">
                <div class="col-xs-12 col-md-6">
                    <table class="table table-hover" style="color:black; ">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Type</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="unit in $root.messages" ng-class="rowClass(unit)">
                                <td>{{unit.panId}}</td>
                                 <td>Milling</td>
                                <td>{{unit.current>50? "Busy" : "Free"}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-xs-12 col-md-6">
                  <div style="width:100%" scatter-chart>
                  </div>

                  <div class="" style="color: #8CCDFD">
                  <i class='fa fa-arrow-up fa-3x' aria-hidden='true' style="padding-left:55%"></i>
                </div>
            </div>
        </div>
    </div>
</div>

 <div class="new-section" style="background:white; padding-top:50px; padding-bottom:50px">
        <div class="container">
                    <h1 style="font-family: 'Roboto', sans-serif;
    font-weight: 100; color:black">Popular Times</h1>

            <hr style="background-color: black; height: 1px; border: 0;">
            <h3>Thursday</h3>
    <div class="chart1" overall-chart></div>
    </div>
    </div>
</body>

</html>
